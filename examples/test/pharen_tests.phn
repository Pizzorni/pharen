(define TESTS-DIR (dirname __FILE__))
(require "../../lib/test.php")
(require "../../pharen.php")

(fn run-test (fname)
    (compile-file (. TESTS-DIR "/tests/" fname ".phn") "tmp")
    (require (. TESTS-DIR "/tmp/" fname ".php")))
    

(let [tests [
        "literals",
        "func_calls",
        "comments",
        "bindings",
        "lists_and_dicts",
        "cond",
        "if",
        "function_definition",
        "lambdas",
        "macros"
    ]]

  (describe "Pharen"
      (lambda ()
          (map "run_test" tests))))
